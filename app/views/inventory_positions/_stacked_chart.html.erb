<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawMarkersMap);

function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date');
    data.addColumn('number', 'Min');
    data.addColumn('number', 'On Hand');
    data.addColumn('number', 'In Transit');
    data.addColumn('number', 'On Order');
    data.addColumn('number', 'Allocated');
    data.addColumn('number', 'Planned Consumption');
    data.addColumn('number', 'Available');
	data.addColumn('number', 'Max');
    <% @projections.each do |ip| %>
      data.addRow(['<%= ip.projected_for.to_formatted_s(:short) %>', <%= @product_location_assignment.minimum_quantity %> , <%= ip.on_hand_quantity %>,<%= ip.in_transit_quantity %>, <%= ip.on_order_quantity %>,null,null,null,null]);
      data.addRow(['<%= ip.projected_for.to_formatted_s(:short) %>', null , null,null, null,<%= ip.allocated_quantity %>, <%= ip.forecasted_quantity %>, <%= ip.available_quantity %>, <%= @product_location_assignment.maximum_quantity %>]);	  
	<% end %>

	options = {
	    curveType: 'function',
            isStacked: true,
            title: "Inventory Projections for SKU " <%=  @inventory_position.product.name %>  at location <%= @inventory_position.location.name %>,
            legend: {position: "bottom"},
            series:
				{0 => {type: "line", pointSize: 0, color: "red"},
				1 => {type: "line", pointSize: 0, color: "#336699" },
				2 => {targetAxisIndex: 1, color: "#FF6600" },
				3 => {targetAxisIndex: 1, color: "#666633" },
				4 => {targetAxisIndex: 1, color: "#FFCC00" },
				5 => {targetAxisIndex: 1, color: "#26ba26" },
				6 => {type: "line", pointSize: 0, color: "#E96D63"},
				7 => {type: "line", pointSize: 0, color: "red"}
				},
			vAxes: [
				{0: {textStyle:{color: 'red'}}},
				{1 => {textStyle:{color: 'blue'}}}
			]
	};
	
    var geochart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    geochart.draw(data, options);
}
</script>
