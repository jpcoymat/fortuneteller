<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
google.load('visualization', '1', {'packages': ['corechart']});
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Proj. Date');
    data.addColumn('number', 'Min');
    data.addColumn('number', 'On Hand');
    data.addColumn('number', 'In Transit');
    data.addColumn('number', 'On Order');
    data.addColumn('number', 'Allocated');
    data.addColumn('number', 'Planned Consumption');
    data.addColumn('number', 'Available');
    data.addColumn('number', 'Max');
    <% @projections.each do |ip| %>
      data.addRow(['<%= ip.projected_for.to_formatted_s(:short) %>', <%= @product_location_assignment.minimum_quantity %> , <%= ip.on_hand_quantity %>,<%= ip.in_transit_quantity %>, <%= ip.on_order_quantity %>,null,null,<%= ip.available_quantity %>, <%= @product_location_assignment.maximum_quantity %>]);
     data.addRow(['<%= ip.projected_for.to_formatted_s(:short) %>', <%= @product_location_assignment.minimum_quantity %> , <%= ip.on_hand_quantity %>,null, null,<%= ip.allocated_quantity %>, <%= ip.forecasted_quantity %>, <%= ip.available_quantity %>, <%= @product_location_assignment.maximum_quantity %>]);
    <% end %>

    var formatter_short = new google.visualization.DateFormat({formatType: 'short'}) ;
    formatter_short.format(data,0);
	options = {
            hAxis: {format: 'MMM, yyyy'},
            isStacked: true,
            title: "Inventory Projections",
            legend: {position: "bottom"},
            series:
				{0: {type: "line", curveType: 'function', pointSize: 0, color: "red"},
				1: {type: "line", curveType: 'function', pointSize: 0, color: "#336699" },
				2: {type: "bars" ,targetAxisIndex: 1, color: "#FF6600" },
				3: {type: "bars", targetAxisIndex: 1, color: "#666633" },
				4: {type: "bars", targetAxisIndex: 1, color: "#FFCC00" },
				5: {type: "bars", targetAxisIndex: 1, color: "#26ba26" },
				6: {type: "line", curveType: 'function', pointSize: 0, color: "#E96D63"},
				7: {type: "line", curveType: 'function', pointSize: 0, color: "red"}
				},
			vAxes: [
				{0: {textStyle:{color: 'red'}}},
				{1: {textStyle:{color: 'blue'}}}
			]
	};
	
    var geochart = new google.visualization.ComboChart(document.getElementById('chart_div'));
    geochart.draw(data, options);
}
</script>
