<h1>Inventory Dashboard</h1>
<div class="container">
<table class="table" width=25%:>
  <tr><th>Priority</th> <th>Priority Description</th>
  <% InventoryException.priorities.each do |k,v| %>
     <tr><td>Priority  <%=v.to_s %></td><td><%= k %></td></tr>
  <% end %>
</table>
</div>
 <div id="chart_div" style="width: 900px; height: 500px;"></div>

  <%= render partial: "map_chart", locals: {data_array: @data_array} %>
<h3>Inventory Exception Breakdown</h3>
  <table class="table table-striped">
    <tr><th>Location</th><th>Priority 1 Exception Count </th> <th>Priority 2 Exception Count </th><th>Priority 3 Exception Count</th></tr>
    <% @locations.each do |location| %>
      <tr><td><%= link_to(location.name, inventory_exceptions_path(inventory_exception: {location_id: location.id})) %></td>
	  <td><%= location.inventory_exceptions.where(priority: 1).all.count %></td>
          <td><%= location.inventory_exceptions.where(priority: 2).all.count %></td>
          <td><%= location.inventory_exceptions.where(priority: 3).all.count %></td>
      </tr>
    <% end %>
  </table> 


<h3>Location Group Exception Breakdown</h3>
  <table class="table table-striped">
    <tr><th>Location Group</th><th>Exception Count </th> </tr>
    <% @location_groups.each do |location_group| %>
      <tr><td><%= link_to(location_group.name, location_group_exceptions_path(location_group_exception: {location_group_id: location_group.id})) %></td>
          <td><%= location_group.location_group_exceptions.count %></td>
      </tr>
    <% end %>
  </table>


  <%= render partial: "bubble_chart", locals: {locations: @locations} %>
<div id="bubble_chart_div" style="width: 100%; height: 500px;"></div>
  <%= render partial: "pie_chart", locals: {locations: @locations} %>
<div id="piechart"></div>
<%= link_to "Main Menu", main_index_path %> 
