<h1>Inventory Dashboard</h1>


<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawMarkersMap);


function drawMarkersMap() {

  var data = new google.visualization.DataTable();
  data.addColumn('number', 'Latitude');
  data.addColumn('number', 'Longitude');
  data.addColumn('string', 'Loc Name');
  data.addColumn('number', 'P1 Exceptions:');
  data.addColumn('number', 'P2 Exceptions');
    
  data.addRows([
    <%= j(@data_array.to_s.html_safe) %>
  ]);
 
  var options = {
    sizeAxis: { minValue: 0, maxValue: <%= @max_quantity %> },
    displayMode: 'markers'
  };
  
 
  var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
  chart.draw(data, options);
};
</script>
   
 <div id="chart_div" style="width: 900px; height: 500px;"></div>


<%= @data_array.to_s %>
